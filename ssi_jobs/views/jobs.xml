<?xml version="1.0"?>

<odoo>

<record id="jobs_form" model="ir.ui.view">
    <field name="name">jobs.form</field>
    <field name="model">ssi_jobs</field>
    <field name="arch" type="xml">
        <form string="Jobs">
            <div class="oe_button_box" name="button_box">
                <button class="oe_stat_button" icon="fa-dollar" type="object" name="action_view_estimates">
                  <field name="order_total" string="Estimate" widget="statinfo"/>
                </button>
                <button class="oe_stat_button" icon="fa-credit-card" type="object" name="action_view_po_count">
                  <field name="po_count" string="Purchase Orders" placeholder="Purchase Orders" widget="statinfo"/>
                </button>
                <button class="oe_stat_button" icon="fa-file-o" type="object" name="action_view_ai_count">
                  <field name="ai_count" string="Vendor Bills" widget="statinfo"/>
                </button>

                <button class="oe_stat_button" icon="fa-wrench" type="object" name="action_view_prod_count">
                  <field name="prod_count" string="Operations" widget="statinfo"/>
                </button>

                <button class="oe_stat_button" icon="fa-file-o" type="object" name="action_view_wo_count">
                  <field name="wo_count" string="Work Orders" widget="statinfo"/>
                </button>
                <button class="oe_stat_button" icon="fa-file-o" type="object" name="action_view_wc_count">
                  <field name="wc_count" string="Timesheets" widget="statinfo"/>
                </button>

                <button name="toggle_active" type="object"
                    class="oe_stat_button" icon="fa-archive">
                    <field name="active" widget="boolean_button"
                        options='{"terminology": "archive"}'/>
                </button>
            </div>
            <group name="main">
                <group name="left">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="objects"/>
                    <field name="size"/>
                    <field name="sizeUM"/>
                    <field name="shaft"/>
                    <field name="dimensions"/>
                </group>
                <group name="right">
                    <field name="ready_for_pickup"/>
                    <field name="urgency"/>
                    <field name="po_number"/>
                    <field name="weight"/>
                    <field name="weightUM"/>
                    <field name="notes"/>
                    <field name="status"/>
                </group>
            </group>
          <notebook>
            <page name="equipment" string="Equioment"/>
            <page name="info" string="Creation Info"/>
          </notebook>
        </form>
    </field>
</record>

<record id="jobs_tree" model="ir.ui.view">
    <field name="name">jobs.tree</field>
    <field name="model">ssi_jobs</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="name"/>
            <field name="partner_id"/>
        </tree>
    </field>
</record>

<record id="jobs_search" model="ir.ui.view">
    <field name="name">jobs.search</field>
    <field name="model">ssi_jobs</field>
    <field name="arch" type="xml">
        <search string="Search Jobs">
            <field name="name" filter_domain="['|', ('name', 'ilike', self), ('code', 'ilike', self)]" string="Name or Number"/>
            <field name="partner_id"/>
            <separator/>
            <filter name="inactive" string="Archived" domain="[('active', '=', False)]"/>
            <group name="groupby">
                <filter name="partner_groupby" string="Partner"
                    context="{'group_by': 'partner_id'}"/>
            </group>
        </search>
    </field>
</record>

<record id="jobs_action" model="ir.actions.act_window">
    <field name="name">Jobs</field>
    <field name="res_model">ssi_jobs</field>
    <field name="view_mode">kanban,tree,form</field>
</record>

<menuitem id="jobs_menu" action="jobs_action"
   sequence="100"/>


<record id="ssi_estimate_tree" model="ir.ui.view">
    <field name="name">ssi_estimate.tree</field>
    <field name="model">sale.order</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="name"/>
            <field class="hidden" name="state"/>
            <field name="confirmation_date"/>
            <field name="commitment_date"/>
            <field name="expected_date"/>
            <field name="partner_id"/>
            <field name="user_id"/>
            <field name="amount_total"/>
            <field name="invoice_status"/>
        </tree>
    </field>
</record>


<record id="sale_order_estimate_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Estimates</field>
  <field name="res_model">sale.order</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_estimate_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>

<record id="ssi_po_tree" model="ir.ui.view">
    <field name="name">ssi_po.tree</field>
    <field name="model">purchase.order</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="name"/>
            <field name="ssi_job_id"/>
            <field name="date_order"/>
            <field name="partner_id"/>
            <!-- <field name="date_planned"/> -->
            <field name="user_id"/>
            <field name="origin"/>
            <field name="amount_untaxed"/>
            <field name="amount_total"/>
            <field name="state"/>
        </tree>
    </field>
</record>


<record id="sale_order_po_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Purchase Orders</field>
  <field name="res_model">purchase.order</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_po_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>


<record id="ssi_ai_tree" model="ir.ui.view">
    <field name="name">ssi_ai.tree</field>
    <field name="model">account.invoice</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="vendor_display_name"/>
            <field name="date_invoice"/>
            <field name="number"/>
            <field name="reference"/>
            <field name="date_due"/>
            <field name="origin"/>
            <field name="amount_untaxed"/>
            <field name="amount_tax"/>
            <field name="amount_total_signed"/>
            <field name="residual_signed"/>
            <field name="state"/>
        </tree>
    </field>
</record>


<record id="sale_order_ai_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Vendor Bills</field>
  <field name="res_model">account.invoice</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_ai_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>

<record id="ssi_prod_tree" model="ir.ui.view">
    <field name="name">ssi_prod.tree</field>
    <field name="model">mrp.production</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="ssi_job_id"/>
            <field name="name"/>
            <!-- <field name="partner_id"/> -->
            <field name="date_planned_start"/>
            <field name="product_id"/>
            <field name="origin"/>
            <field name="product_qty"/>
            <field name="product_uom_id"/>
            <field name="availability"/>
            <field name="routing_id"/>
            <field name="state"/>
        </tree>
    </field>
</record>


<record id="sale_order_prod_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Operations</field>
  <field name="res_model">mrp.production</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_prod_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>

<record id="ssi_wo_tree" model="ir.ui.view">
    <field name="name">ssi_wo.tree</field>
    <field name="model">mrp.workorder</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="ssi_job_id"/>
            <field name="name"/>
            <field name="date_planned_start"/>
            <field name="date_planned_finished"/>
            <field name="workcenter_id"/>
            <field name="production_id"/>
            <field name="duration_expected"/>
            <field name="duration"/>
            <field name="product_id"/>
            <field name="state"/>
        </tree>
    </field>
</record>


<record id="sale_order_wo_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Vendor Bills</field>
  <field name="res_model">mrp.workorder</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_wo_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>

<record id="ssi_wc_tree" model="ir.ui.view">
    <field name="name">ssi_wc.tree</field>
    <field name="model">mrp.workcenter.productivity</field>
    <field name="arch" type="xml">
        <tree string="Jobs">
            <field name="date_start"/>
            <field name="date_end"/>
            <field name="workcenter_id"/>
            <field name="user_id"/>
            <field name="loss_id"/>
            <field name="duration"/>
        </tree>
    </field>
</record>


<record id="sale_order_wc_line_action" model="ir.actions.act_window">
  <field name="auto_search" eval="True"/>
  <field name="binding_model_id" eval="False"/>
  <field name="binding_type">action</field>
  <field name="context">{'search_default_ssi_job_id': active_id,'default_ssi_job_id': active_id}</field>
  <field name="domain">[('ssi_job_id', '=', active_id)]</field>
  <field name="filter" eval="False"/>
  <field name="groups_id" eval="[(6, 0, [])]"/>
  <field name="help" eval="False"/>
  <field name="limit">80</field>
  <field name="multi" eval="False"/>
  <field name="name">Vendor Bills</field>
  <field name="res_model">mrp.workcenter.productivity</field>
  <field name="search_view_id" eval="False"/>
  <field name="src_model" eval="False"/>
  <field name="target">current</field>
  <field name="type">ir.actions.act_window</field>
  <field name="usage" eval="False"/>
  <field name="view_id" ref="ssi_wc_tree"/>
  <field name="view_mode">tree,form</field>
  <field name="view_type">form</field>
</record>




<!-- <record id="sale_order_estimate_line_action" model="ir.actions.act_window">
        <field name="name">Estimates</field>
        <field name="res_model">sale.order</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree, form</field>
        <field name="view_id" ref="view_move_line_tree"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_empty_folder">
            There's no product move yet
          </p>
        </field>
</record> -->


</odoo>
